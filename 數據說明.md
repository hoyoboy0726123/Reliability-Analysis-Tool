# 可靠度分析工具 - 數據說明文檔

## 📊 圖表類型與意義

本工具提供三種可靠度分析圖表,幫助您全面理解產品的可靠性特徵。

---

### 1️⃣ Reliability R(t) - 可靠度函數

**圖表名稱**: Reliability Function (可靠度曲線)

**數學定義**:
- **Weibull 分佈**: `R(t) = exp(-(t/η)^β)`
- **零失效 (指數分佈)**: `R(t) = exp(-λt)`

**座標軸意義**:
- **X 軸**: 時間 (Time) - 單位: 小時 (Hours)
- **Y 軸**: 可靠度 (Reliability) - 範圍: 0 到 1 (或 0% 到 100%)

**物理意義**:
- 表示產品在時間 t 時**仍然正常運作的機率**
- 例如: R(10000) = 0.95 表示產品運作 10,000 小時後,有 95% 的機率仍然存活
- 曲線**從 1 開始遞減**,時間越長,存活機率越低

**應用場景**:
- 預測產品在保固期內的存活率
- 評估產品是否滿足可靠度要求 (例如: 2 年內 R(t) > 95%)
- 制定保固策略的依據

---

### 2️⃣ Failure Rate h(t) - 失效率函數 (浴缸曲線)

**圖表名稱**: Hazard Rate / Instantaneous Failure Rate (瞬間失效率)

**數學定義**:
- **Weibull 分佈**: `h(t) = (β/η) × (t/η)^(β-1)`
- **零失效 (指數分佈)**: `h(t) = λ` (常數)

**座標軸意義**:
- **X 軸**: 時間 (Time) - 單位: 小時 (Hours)
- **Y 軸**: 失效率 (Failure Rate) - 單位: Failures/Hour

**物理意義**:
- 表示產品在時間 t **瞬間的失效風險**
- 這是「浴缸曲線」的縱軸,描述失效率隨時間的變化趨勢

**曲線形狀與解讀**:

| Weibull β 值 | h(t) 曲線形狀 | 失效模式 | 產品生命週期階段 |
|-------------|-------------|---------|---------------|
| **β < 1** | **遞減** ↘ | 早期失效 (Infant Mortality) | 製造缺陷、品質篩選不足 |
| **β = 1** | **水平線** → | 隨機失效 (Random Failure) | 正常使用期 (Useful Life) |
| **β > 1** | **遞增** ↗ | 磨耗失效 (Wear-out) | 老化期 (End of Life) |

**應用場景**:
- 判斷產品目前處於哪個生命週期階段
- 若 β > 1 且曲線上升,表示產品正在老化,需要預防性維護
- 若 β < 1,表示可能有早期製造缺陷,需要改善生產流程
- 規劃維護計劃和備品策略

---

### 3️⃣ PDF f(t) - 機率密度函數

**圖表名稱**: Probability Density Function (失效機率密度分佈)

**數學定義**:
- **Weibull 分佈**: `f(t) = (β/η) × (t/η)^(β-1) × exp(-(t/η)^β)`
- **零失效 (指數分佈)**: `f(t) = λ × exp(-λt)`

**座標軸意義**:
- **X 軸**: 時間 (Time) - 單位: 小時 (Hours)
- **Y 軸**: 機率密度 (Probability Density) - 單位: 1/Hour

**物理意義**:
- 表示產品**在時間 t 附近失效的機率密度**
- 曲線下的面積 = 該時間區間內失效的機率
- **峰值位置** = 最可能發生失效的時間點

**曲線特徵**:
- **鐘形曲線** (或偏態曲線):
  - 峰值越高 → 失效時間越集中
  - 峰值越低 → 失效時間越分散
- **曲線下總面積 = 1** (100% 的產品最終都會失效)

**應用場景**:
- 預測「失效高峰期」在何時發生
- 規劃維護計劃 (在失效高峰期前進行預防性維護)
- 評估產品壽命的一致性 (曲線越窄,壽命越一致)
- 備品庫存規劃

---

## 🔗 三者數學關係

這三個函數在數學上是相關的:

```
h(t) = f(t) / R(t)        (失效率 = 密度 / 可靠度)
R(t) = exp(-∫h(u)du)      (可靠度 = 累積失效率的指數)
f(t) = h(t) × R(t)        (密度 = 失效率 × 可靠度)
```

---

## 📈 關鍵指標說明

### MTTF (Mean Time To Failure) - 平均失效時間

**定義**: 所有產品壽命的平均值

**計算公式**:
- **Weibull**: `MTTF = η × Γ(1 + 1/β)`
  - 其中 Γ 是 Gamma 函數
- **零失效 (指數)**: `MTTF = 1/λ`

**意義**:
- 代表產品的「平均壽命」
- 注意: 這是統計平均值,實際上有些產品會早於 MTTF 失效,有些會晚於 MTTF 失效

**應用**:
- 產品壽命的總體評估
- 與競品比較的基準
- 長期維護成本估算

---

### B1% Life - 1% 失效壽命

**定義**: **1% 的產品會失效的時間點**

**計算公式** (Weibull):
```
B1 = η × [-ln(1 - 0.01)]^(1/β)
   = η × [-ln(0.99)]^(1/β)
```

**意義**:
- 當產品運作到 B1 壽命時,**累積失效率達到 1%**
- 換句話說,**99% 的產品仍然存活**

**為什麼 B1% Life 很重要?**

1. **保固策略制定**
   - 如果保固期 = 2 年,但 B1 = 1.7 年
   - 表示在保固期內,**可能有超過 1% 的產品會失效**
   - 廠商需要評估維修成本與保固策略

2. **品質管控基準**
   - B1 壽命可作為**產品品質的量化指標**
   - 不同產品或批次的 B1 可直接比較品質差異

3. **與 MTTF 的差異**
   - **MTTF** = 平均壽命 (50% 失效點附近)
   - **B1** = 最早失效的 1% 產品的壽命
   - **B1 更關注「最弱的那 1%」**,更符合實務需求

**常見的 Bp% Life 指標**:

| 指標 | 意義 | 應用場景 |
|------|------|----------|
| **B0.1** | 0.1% 失效 | 極高可靠度要求 (航太、醫療) |
| **B1** | 1% 失效 | 消費性電子產品保固參考 |
| **B10** | 10% 失效 | 工業設備維護計劃 |
| **B50** | 50% 失效 | 等同於 **中位壽命 (Median Life)** |

---

### Reliability (2 Years) - 2 年可靠度

**定義**: 產品運作 2 年後的存活機率

**計算**:
- 2 年 = 17,520 小時 (24 × 365 × 2)
- `R(17520) = exp(-(17520/η)^β)` (Weibull)
- `R(17520) = exp(-λ × 17520)` (零失效)

**意義**:
- 直接反映產品在典型保固期內的可靠性
- 例如: R(2年) = 97.81% 表示 2 年後有 97.81% 的產品仍正常運作
- 失效率 = 100% - 97.81% = 2.19%

---

### FITs (Failures In Time) - 失效率單位

**定義**: 每 10 億小時的失效次數

**計算**:
```
FITs = λ × 10^9
     = (1/MTTF) × 10^9
```

**意義**:
- 用於表示極低的失效率
- 常用於高可靠度產品 (半導體、伺服器等)

**範例**:
- 78.87 FITs = 78.87 次失效 / 10 億小時
- 等同於 MTTF = 12,678,372 小時 ≈ 1,447 年

---

## 🔬 分析模式說明

### Weibull Analysis (r > 0) - 有失效數據

**適用情境**: 測試中有產品失效

**所需數據**:
- 失效時間列表 (TTF - Time To Failure)
- 至少需要 **2 個以上**的失效數據點

**分析方法**:
- 使用 Rank Regression (秩迴歸) 擬合 Weibull 分佈
- 計算 β (形狀參數) 和 η (特徵壽命)

**輸出結果**:
- MTTF (平均壽命)
- B1% Life (1% 失效壽命)
- Reliability (2 Years)
- Weibull 參數: β, η

**優點**:
- 能準確描述產品的失效行為
- 可判斷失效模式 (早期失效、隨機失效、磨耗失效)

**限制**:
- 需要足夠的失效數據 (至少 2 個,建議 5 個以上)
- 單一失效數據無法進行 Weibull 擬合

---

### Zero-Failure Analysis (r = 0) - 零失效分析

**適用情境**: 測試中**沒有產品失效**

**所需數據**:
- 樣品數量 (N)
- 測試時長 (t_test)
- 信心水準 (Confidence Level, 例如 60%)

**分析方法**:
- 使用 Chi-Squared (卡方分佈) 估計失效率上限
- 假設產品服從指數分佈 (β = 1, 隨機失效)

**輸出結果**:
- MTTF (Lower Limit) - 平均壽命下限
- Max Failure Rate (FITs) - 失效率上限
- Reliability (2 Years)

**優點**:
- 即使沒有失效數據,仍能估計可靠度
- 提供保守的可靠度估計

**限制**:
- 只能給出「上限」或「下限」,無法精確估計
- 假設指數分佈 (β = 1),可能不符合實際情況

---

## ⚠️ 重要注意事項

### 為何單一失效時間與零失效時間產生相同結果?

**原因**: Weibull 分析需要**至少 2 個失效數據點**才能進行線性迴歸擬合

**技術說明**:

1. **Weibull 分析的數學基礎**:
   - 使用 Rank Regression (秩迴歸) 方法
   - 需要在 Weibull 機率紙上繪製多個點
   - 通過這些點擬合一條直線,計算斜率 (β) 和截距 (η)

2. **單一數據點的問題**:
   - 只有 1 個失效數據 → 只能在圖上標示 1 個點
   - **無法用 1 個點擬合一條直線** (需要至少 2 點)
   - 因此程式會判定「失效數據不足」,自動切換到零失效模式

3. **程式邏輯** (參考 `app.py` 第 85-86 行):
   ```python
   if n_failures < 2:
       return {"error": "失效數據不足，無法進行 Weibull 擬合 (至少需要 2 點)"}
   ```

4. **結果**:
   - 輸入 1 個失效時間 → 被視為「失效數據不足」
   - 輸入 0 個失效時間 → 零失效模式
   - **兩者都會使用零失效分析**,因此結果相同

**建議**:
- 若要進行 Weibull 分析,請至少輸入 **2 個失效時間**
- 建議輸入 **5 個以上**的失效數據,以獲得更準確的擬合結果
- 若測試中真的只有 1 個失效,建議:
  - 延長測試時間,等待更多失效
  - 或使用零失效分析 (較保守的估計)

---

## 📋 實務應用範例

### 範例 1: Weibull 分析 (有失效數據)

**測試條件**:
- 失效時間: 100, 200 小時
- 加速因子: AF = 151.77

**結果**:
- β = 4.91 (> 1, 磨耗失效)
- MTTF = 34,924 小時 ≈ 3.99 年
- B1% Life = 14,920 小時 ≈ 1.70 年
- 2 年可靠度 = 97.81%

**解讀**:
1. **β = 4.91 > 1** → 產品處於**磨耗失效期**
   - 失效率隨時間增加
   - 大部分產品會在接近的時間點失效

2. **B1 = 1.70 年 < 2 年保固期**
   - 在保固期內,預計會有 **> 1%** 的產品失效
   - 實際上,2 年時的失效率 = **2.19%**

3. **建議**:
   - 若保固期 = 2 年,需要準備應對約 2.19% 的失效率
   - 或考慮縮短保固期至 1.5 年
   - 或提升產品設計壽命

---

### 範例 2: 零失效分析 (無失效數據)

**測試條件**:
- 樣品數: 64
- 測試時長: 1196 小時
- 信心水準: 60%
- 加速因子: AF = 151.77

**結果**:
- MTTF (Lower Limit) > 12,678,372 小時 ≈ 1,447 年
- Max Failure Rate < 78.87 FITs
- 2 年可靠度 = 99.86%

**解讀**:
1. **零失效** → 使用保守估計
   - 只能給出「下限」和「上限」
   - 實際值可能更好

2. **2 年可靠度 = 99.86%**
   - 失效率上限 = 0.14%
   - 表示產品在保固期內的失效風險**極低**

3. **建議**:
   - 產品品質良好,可安心提供 2 年保固
   - 若要更精確的估計,建議延長測試時間或增加樣品數

---

## 🎯 決策建議

### 保固策略制定

| 情境 | MTTF | B1% Life | 保固期 | 建議 |
|------|------|----------|--------|------|
| **安全** | 10 年 | 3 年 | 2 年 | ✅ B1 > 保固期,可安心提供保固 |
| **風險** | 10 年 | 1.5 年 | 2 年 | ⚠️ B1 < 保固期,需評估維修成本 |
| **優化** | 5 年 | 4 年 | 2 年 | ✅ 雖然 MTTF 較低,但 B1 仍高於保固期 |

### 品質改善方向

| β 值範圍 | 失效模式 | 改善方向 |
|---------|---------|---------|
| **β < 1** | 早期失效 | 加強品質篩選、改善製程 |
| **β ≈ 1** | 隨機失效 | 降低環境應力、提升設計餘裕 |
| **β > 1** | 磨耗失效 | 提升材料品質、優化設計壽命 |

---

## 📚 參考資料

- Weibull Analysis Handbook (Abernethy, 2006)
- MIL-HDBK-217F: Reliability Prediction of Electronic Equipment
- IEC 61649: Weibull Analysis
- JEDEC JESD85: Methods for Calculating Failure Rates in Units of FITs

---

**文檔版本**: 1.0  
**最後更新**: 2025-11-26  
**工具版本**: Reliability Analysis Suite v1.0
